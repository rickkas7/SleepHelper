<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SleepExample1: SleepHelper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SleepExample1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle"><div class="title">SleepHelper Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_sleep_helper_8h_source.html">SleepHelper.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class for a list of zero or more callback functions.  <a href="class_sleep_helper_1_1_app_callback.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_cloud_settings_file.html">CloudSettingsFile</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cloud-based settings.  <a href="class_sleep_helper_1_1_cloud_settings_file.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class to handle building JSON events from multiple callbacks with priority and the ability to generate multiple events if necessary.  <a href="class_sleep_helper_1_1_event_combiner.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_persistent_data.html">PersistentData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for storing small data used by <a class="el" href="class_sleep_helper.html">SleepHelper</a> in the flash file system.  <a href="class_sleep_helper_1_1_persistent_data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_persistent_data_base.html">PersistentDataBase</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class for storing persistent binary data to a file or retained memory.  <a href="class_sleep_helper_1_1_persistent_data_base.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_persistent_data_file.html">PersistentDataFile</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class for persistent data stored in a file.  <a href="class_sleep_helper_1_1_persistent_data_file.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_settings_file.html">SettingsFile</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for managing the <a class="el" href="class_sleep_helper.html">SleepHelper</a> settings file.  <a href="class_sleep_helper_1_1_settings_file.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_should_connect_app_callback.html">ShouldConnectAppCallback</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for ShouldConnect application callback.  <a href="class_sleep_helper_1_1_should_connect_app_callback.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_sleep_helper_recursive_mutex.html">SleepHelperRecursiveMutex</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a wrapper around a recursive mutex, similar to Device OS RecursiveMutex.  <a href="class_sleep_helper_1_1_sleep_helper_recursive_mutex.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4a1cebe9ec345713091bd3f623cb6985"><td class="memItemLeft" align="right" valign="top"><a id="a4a1cebe9ec345713091bd3f623cb6985" name="a4a1cebe9ec345713091bd3f623cb6985"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withSleepConfigurationFunction</b> (std::function&lt; bool(SystemSleepConfiguration &amp;, std::chrono::milliseconds &amp;)&gt; fn)</td></tr>
<tr class="separator:a4a1cebe9ec345713091bd3f623cb6985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac633b93687b39b6b9e5ce18caa205dff"><td class="memItemLeft" align="right" valign="top"><a id="ac633b93687b39b6b9e5ce18caa205dff" name="ac633b93687b39b6b9e5ce18caa205dff"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withWakeFunction</b> (std::function&lt; bool(const SystemSleepResult &amp;)&gt; fn)</td></tr>
<tr class="separator:ac633b93687b39b6b9e5ce18caa205dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf9f04100075adfc2a5ccd27a14db7de"><td class="memItemLeft" align="right" valign="top"><a id="abf9f04100075adfc2a5ccd27a14db7de" name="abf9f04100075adfc2a5ccd27a14db7de"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withSetupFunction</b> (std::function&lt; bool()&gt; fn)</td></tr>
<tr class="separator:abf9f04100075adfc2a5ccd27a14db7de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015eb8ec460526d1dd81b4859823aa7e"><td class="memItemLeft" align="right" valign="top"><a id="a015eb8ec460526d1dd81b4859823aa7e" name="a015eb8ec460526d1dd81b4859823aa7e"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withLoopFunction</b> (std::function&lt; bool()&gt; fn)</td></tr>
<tr class="separator:a015eb8ec460526d1dd81b4859823aa7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac73ffa2b764f716d9af9c7840e7c30e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#ac73ffa2b764f716d9af9c7840e7c30e5">withSleepReadyFunction</a> (std::function&lt; bool(system_tick_t)&gt; fn)</td></tr>
<tr class="memdesc:ac73ffa2b764f716d9af9c7840e7c30e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if it's OK to sleep now, when in connected state.  <a href="class_sleep_helper.html#ac73ffa2b764f716d9af9c7840e7c30e5">More...</a><br /></td></tr>
<tr class="separator:ac73ffa2b764f716d9af9c7840e7c30e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabfb4418f8fb006b50d8efff7edbee4d"><td class="memItemLeft" align="right" valign="top"><a id="aabfb4418f8fb006b50d8efff7edbee4d" name="aabfb4418f8fb006b50d8efff7edbee4d"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withShouldConnectFunction</b> (std::function&lt; bool(int &amp;connectConviction, int &amp;noConnectConviction)&gt; fn)</td></tr>
<tr class="separator:aabfb4418f8fb006b50d8efff7edbee4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75d49d150a195cdd7ab8b9d01ef462f2"><td class="memItemLeft" align="right" valign="top"><a id="a75d49d150a195cdd7ab8b9d01ef462f2" name="a75d49d150a195cdd7ab8b9d01ef462f2"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withWakeOrBootFunction</b> (std::function&lt; bool()&gt; fn)</td></tr>
<tr class="separator:a75d49d150a195cdd7ab8b9d01ef462f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2ea01e4c0d13adc81c038b33ea8871"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a0d2ea01e4c0d13adc81c038b33ea8871">withWakeEventFunction</a> (std::function&lt; bool(JSONWriter &amp;, int &amp;)&gt; fn)</td></tr>
<tr class="memdesc:a0d2ea01e4c0d13adc81c038b33ea8871"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a callback to add to an event published on wake.  <a href="class_sleep_helper.html#a0d2ea01e4c0d13adc81c038b33ea8871">More...</a><br /></td></tr>
<tr class="separator:a0d2ea01e4c0d13adc81c038b33ea8871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f3f028336fae8f9b7b56335a2af98f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a48f3f028336fae8f9b7b56335a2af98f">withSleepOrResetFunction</a> (std::function&lt; bool(bool)&gt; fn)</td></tr>
<tr class="memdesc:a48f3f028336fae8f9b7b56335a2af98f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a function to be called right before sleep or reset.  <a href="class_sleep_helper.html#a48f3f028336fae8f9b7b56335a2af98f">More...</a><br /></td></tr>
<tr class="separator:a48f3f028336fae8f9b7b56335a2af98f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5222c45e18155a9de17cb4350a8fbc"><td class="memItemLeft" align="right" valign="top"><a id="a6e5222c45e18155a9de17cb4350a8fbc" name="a6e5222c45e18155a9de17cb4350a8fbc"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withMaximumTimeToConnectFunction</b> (std::function&lt; bool(system_tick_t ms)&gt; fn)</td></tr>
<tr class="separator:a6e5222c45e18155a9de17cb4350a8fbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8889f82083eb26229ac096907218766"><td class="memItemLeft" align="right" valign="top"><a id="ab8889f82083eb26229ac096907218766" name="ab8889f82083eb26229ac096907218766"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withMaximumTimeToConnect</b> (std::chrono::milliseconds timeMs)</td></tr>
<tr class="separator:ab8889f82083eb26229ac096907218766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147c91d776b0968268e148b1be6958d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a147c91d776b0968268e148b1be6958d0">withNoConnectionFunction</a> (std::function&lt; bool()&gt; fn)</td></tr>
<tr class="memdesc:a147c91d776b0968268e148b1be6958d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a callback for when in the no connection state.  <a href="class_sleep_helper.html#a147c91d776b0968268e148b1be6958d0">More...</a><br /></td></tr>
<tr class="separator:a147c91d776b0968268e148b1be6958d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0220bfedac1060b8246dff582426cb35"><td class="memItemLeft" align="right" valign="top"><a id="a0220bfedac1060b8246dff582426cb35" name="a0220bfedac1060b8246dff582426cb35"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withWhileConnectedFunction</b> (std::function&lt; bool()&gt; fn)</td></tr>
<tr class="separator:a0220bfedac1060b8246dff582426cb35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ae8f2760ead87883343d1d418b977c"><td class="memItemLeft" align="right" valign="top"><a id="a68ae8f2760ead87883343d1d418b977c" name="a68ae8f2760ead87883343d1d418b977c"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withMinimumConnectedTime</b> (std::chrono::milliseconds timeMs)</td></tr>
<tr class="separator:a68ae8f2760ead87883343d1d418b977c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805abcdae1dd42163191a9edcb69660f"><td class="memItemLeft" align="right" valign="top"><a id="a805abcdae1dd42163191a9edcb69660f" name="a805abcdae1dd42163191a9edcb69660f"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withSettingChangeFunction</b> (std::function&lt; bool(const char *)&gt; fn)</td></tr>
<tr class="separator:a805abcdae1dd42163191a9edcb69660f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d89d9b33b53b09df85580c20e8dfd3"><td class="memItemLeft" align="right" valign="top"><a id="a69d89d9b33b53b09df85580c20e8dfd3" name="a69d89d9b33b53b09df85580c20e8dfd3"></a>
<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>withMinimumSoC</b> (float minSoC, int conviction=100)</td></tr>
<tr class="separator:a69d89d9b33b53b09df85580c20e8dfd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa293cbbab40d07245d2006a71f696e6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#aa293cbbab40d07245d2006a71f696e6f">withTimeConfig</a> (const char *tzConfig)</td></tr>
<tr class="memdesc:aa293cbbab40d07245d2006a71f696e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the time configuration string for local time calculations.  <a href="class_sleep_helper.html#aa293cbbab40d07245d2006a71f696e6f">More...</a><br /></td></tr>
<tr class="separator:aa293cbbab40d07245d2006a71f696e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa55dc9d8e2627cf697ac1bd6a1db9c2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d">setup</a> ()</td></tr>
<tr class="memdesc:aa55dc9d8e2627cf697ac1bd6a1db9c2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform setup operations; call this from global application <a class="el" href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d" title="Perform setup operations; call this from global application setup()">setup()</a>  <a href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d">More...</a><br /></td></tr>
<tr class="separator:aa55dc9d8e2627cf697ac1bd6a1db9c2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dac8eec4a7beb5a0ae8e6060e51764e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a8dac8eec4a7beb5a0ae8e6060e51764e">loop</a> ()</td></tr>
<tr class="memdesc:a8dac8eec4a7beb5a0ae8e6060e51764e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform application loop operations; call this from global application <a class="el" href="class_sleep_helper.html#a8dac8eec4a7beb5a0ae8e6060e51764e" title="Perform application loop operations; call this from global application loop()">loop()</a>  <a href="class_sleep_helper.html#a8dac8eec4a7beb5a0ae8e6060e51764e">More...</a><br /></td></tr>
<tr class="separator:a8dac8eec4a7beb5a0ae8e6060e51764e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad424c11c0781ea2ebbdd96a43521ea06"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#ad424c11c0781ea2ebbdd96a43521ea06">instance</a> ()</td></tr>
<tr class="memdesc:ad424c11c0781ea2ebbdd96a43521ea06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the singleton instance of this class, allocating it if necessary.  <a href="class_sleep_helper.html#ad424c11c0781ea2ebbdd96a43521ea06">More...</a><br /></td></tr>
<tr class="separator:ad424c11c0781ea2ebbdd96a43521ea06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a7a8fcf09815441b0de5478f492cf67aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper_1_1_settings_file.html">SettingsFile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a7a8fcf09815441b0de5478f492cf67aa">settingsFile</a></td></tr>
<tr class="memdesc:a7a8fcf09815441b0de5478f492cf67aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for managing the settings file.  <a href="class_sleep_helper.html#a7a8fcf09815441b0de5478f492cf67aa">More...</a><br /></td></tr>
<tr class="separator:a7a8fcf09815441b0de5478f492cf67aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47b6cf4b7036b8ab39b55e0aa6278f6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper_1_1_persistent_data.html">PersistentData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a47b6cf4b7036b8ab39b55e0aa6278f6b">persistentData</a></td></tr>
<tr class="memdesc:a47b6cf4b7036b8ab39b55e0aa6278f6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for managing persistent data.  <a href="class_sleep_helper.html#a47b6cf4b7036b8ab39b55e0aa6278f6b">More...</a><br /></td></tr>
<tr class="separator:a47b6cf4b7036b8ab39b55e0aa6278f6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a89399adf4c228cd258637ae45465418f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a89399adf4c228cd258637ae45465418f">SleepHelper</a> ()</td></tr>
<tr class="memdesc:a89399adf4c228cd258637ae45465418f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor is protected because the class is a singleton.  <a href="class_sleep_helper.html#a89399adf4c228cd258637ae45465418f">More...</a><br /></td></tr>
<tr class="separator:a89399adf4c228cd258637ae45465418f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1640a7ac7d7ba028f468d14d495cbfb"><td class="memItemLeft" align="right" valign="top"><a id="af1640a7ac7d7ba028f468d14d495cbfb" name="af1640a7ac7d7ba028f468d14d495cbfb"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~SleepHelper</b> ()</td></tr>
<tr class="memdesc:af1640a7ac7d7ba028f468d14d495cbfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor is protected because the class is a singleton and cannot be deleted. <br /></td></tr>
<tr class="separator:af1640a7ac7d7ba028f468d14d495cbfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af61ceb6581809f8166c32e1eb5bbda92"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#af61ceb6581809f8166c32e1eb5bbda92">SleepHelper</a> (const <a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;)=delete</td></tr>
<tr class="separator:af61ceb6581809f8166c32e1eb5bbda92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c086ef306238bde738d7837c0e52bbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a4c086ef306238bde738d7837c0e52bbb">operator=</a> (const <a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;)=delete</td></tr>
<tr class="separator:a4c086ef306238bde738d7837c0e52bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2652c1019e156dbcaa5b1fa83a59f059"><td class="memItemLeft" align="right" valign="top"><a id="a2652c1019e156dbcaa5b1fa83a59f059" name="a2652c1019e156dbcaa5b1fa83a59f059"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>systemEventHandler</b> (system_event_t event, int param)</td></tr>
<tr class="separator:a2652c1019e156dbcaa5b1fa83a59f059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae458f2222f1fb920f5ea59976ec5f758"><td class="memItemLeft" align="right" valign="top"><a id="ae458f2222f1fb920f5ea59976ec5f758" name="ae458f2222f1fb920f5ea59976ec5f758"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandlerStart</b> ()</td></tr>
<tr class="separator:ae458f2222f1fb920f5ea59976ec5f758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a9f4aba72174b61fd4a117c40c0151"><td class="memItemLeft" align="right" valign="top"><a id="a16a9f4aba72174b61fd4a117c40c0151" name="a16a9f4aba72174b61fd4a117c40c0151"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandlerConnectWait</b> ()</td></tr>
<tr class="separator:a16a9f4aba72174b61fd4a117c40c0151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ba6f6f8f9abfe688f507a0ca8aa058a"><td class="memItemLeft" align="right" valign="top"><a id="a0ba6f6f8f9abfe688f507a0ca8aa058a" name="a0ba6f6f8f9abfe688f507a0ca8aa058a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandlerConnected</b> ()</td></tr>
<tr class="separator:a0ba6f6f8f9abfe688f507a0ca8aa058a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a671842ec813a228dee90ffa8bef692dc"><td class="memItemLeft" align="right" valign="top"><a id="a671842ec813a228dee90ffa8bef692dc" name="a671842ec813a228dee90ffa8bef692dc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandlerReconnectWait</b> ()</td></tr>
<tr class="separator:a671842ec813a228dee90ffa8bef692dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a773d6e7b996a7b37e9bac67caf2bdc"><td class="memItemLeft" align="right" valign="top"><a id="a3a773d6e7b996a7b37e9bac67caf2bdc" name="a3a773d6e7b996a7b37e9bac67caf2bdc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandlerNoConnection</b> ()</td></tr>
<tr class="separator:a3a773d6e7b996a7b37e9bac67caf2bdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a551daa4717dfcaad8405f06e49d3e424"><td class="memItemLeft" align="right" valign="top"><a id="a551daa4717dfcaad8405f06e49d3e424" name="a551daa4717dfcaad8405f06e49d3e424"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandlerDisconnectBeforeSleep</b> ()</td></tr>
<tr class="separator:a551daa4717dfcaad8405f06e49d3e424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cbc572eff1167e5e3dcd77aa0f7c7a4"><td class="memItemLeft" align="right" valign="top"><a id="a4cbc572eff1167e5e3dcd77aa0f7c7a4" name="a4cbc572eff1167e5e3dcd77aa0f7c7a4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandlerPrepareToSleep</b> ()</td></tr>
<tr class="separator:a4cbc572eff1167e5e3dcd77aa0f7c7a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a7fd366a7d2fc5519300713a75675c3cd"><td class="memItemLeft" align="right" valign="top"><a id="a7fd366a7d2fc5519300713a75675c3cd" name="a7fd366a7d2fc5519300713a75675c3cd"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>systemEventHandlerStatic</b> (system_event_t event, int param)</td></tr>
<tr class="separator:a7fd366a7d2fc5519300713a75675c3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a5ab8265462fb2d359ce425be693aaed9"><td class="memItemLeft" align="right" valign="top"><a id="a5ab8265462fb2d359ce425be693aaed9" name="a5ab8265462fb2d359ce425be693aaed9"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&lt; SystemSleepConfiguration &amp;, std::chrono::milliseconds &amp; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>sleepConfigurationFunctions</b></td></tr>
<tr class="separator:a5ab8265462fb2d359ce425be693aaed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a841620a67c0f98bfee4e9808a8226c3d"><td class="memItemLeft" align="right" valign="top"><a id="a841620a67c0f98bfee4e9808a8226c3d" name="a841620a67c0f98bfee4e9808a8226c3d"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&lt; const SystemSleepResult &amp; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>wakeFunctions</b></td></tr>
<tr class="separator:a841620a67c0f98bfee4e9808a8226c3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab6eb4ae918d1cc5f8d3b9f8de4ef233"><td class="memItemLeft" align="right" valign="top"><a id="aab6eb4ae918d1cc5f8d3b9f8de4ef233" name="aab6eb4ae918d1cc5f8d3b9f8de4ef233"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><b>setupFunctions</b></td></tr>
<tr class="separator:aab6eb4ae918d1cc5f8d3b9f8de4ef233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aa8bc1eef9fc012ace84e22a0c6dd03"><td class="memItemLeft" align="right" valign="top"><a id="a4aa8bc1eef9fc012ace84e22a0c6dd03" name="a4aa8bc1eef9fc012ace84e22a0c6dd03"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><b>loopFunctions</b></td></tr>
<tr class="separator:a4aa8bc1eef9fc012ace84e22a0c6dd03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa89c7123a48644c2479c67a96c496e4c"><td class="memItemLeft" align="right" valign="top"><a id="aa89c7123a48644c2479c67a96c496e4c" name="aa89c7123a48644c2479c67a96c496e4c"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&lt; system_tick_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>sleepReadyFunctions</b></td></tr>
<tr class="separator:aa89c7123a48644c2479c67a96c496e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc8cbdd5b7a7ef3d292f3c225011e71"><td class="memItemLeft" align="right" valign="top"><a id="a4dc8cbdd5b7a7ef3d292f3c225011e71" name="a4dc8cbdd5b7a7ef3d292f3c225011e71"></a>
<a class="el" href="class_sleep_helper_1_1_should_connect_app_callback.html">ShouldConnectAppCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><b>shouldConnectFunctions</b></td></tr>
<tr class="separator:a4dc8cbdd5b7a7ef3d292f3c225011e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a790a2897f52fc755f752b1f76af94994"><td class="memItemLeft" align="right" valign="top"><a id="a790a2897f52fc755f752b1f76af94994" name="a790a2897f52fc755f752b1f76af94994"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><b>wakeOrBootFunctions</b></td></tr>
<tr class="separator:a790a2897f52fc755f752b1f76af94994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe77dceb8caff70bdba400abb3b2533"><td class="memItemLeft" align="right" valign="top"><a id="adfe77dceb8caff70bdba400abb3b2533" name="adfe77dceb8caff70bdba400abb3b2533"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>sleepOrResetFunctions</b></td></tr>
<tr class="separator:adfe77dceb8caff70bdba400abb3b2533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a775b5b367463b986c8c1c929adccf97f"><td class="memItemLeft" align="right" valign="top"><a id="a775b5b367463b986c8c1c929adccf97f" name="a775b5b367463b986c8c1c929adccf97f"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&lt; system_tick_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>maximumTimeToConnectFunctions</b></td></tr>
<tr class="separator:a775b5b367463b986c8c1c929adccf97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49ebdc52fd4d78f06fe135f7ed3d598"><td class="memItemLeft" align="right" valign="top"><a id="ac49ebdc52fd4d78f06fe135f7ed3d598" name="ac49ebdc52fd4d78f06fe135f7ed3d598"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><b>noConnectionFunctions</b></td></tr>
<tr class="separator:ac49ebdc52fd4d78f06fe135f7ed3d598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab99d26318ff9514a6db29adeb87bb18b"><td class="memItemLeft" align="right" valign="top"><a id="ab99d26318ff9514a6db29adeb87bb18b" name="ab99d26318ff9514a6db29adeb87bb18b"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><b>whileConnectedFunctions</b></td></tr>
<tr class="separator:ab99d26318ff9514a6db29adeb87bb18b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2555c5f23e97e7ff7c46eb6b69fd785b"><td class="memItemLeft" align="right" valign="top"><a id="a2555c5f23e97e7ff7c46eb6b69fd785b" name="a2555c5f23e97e7ff7c46eb6b69fd785b"></a>
<a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a>&#160;</td><td class="memItemRight" valign="bottom"><b>wakeEventFunctions</b></td></tr>
<tr class="separator:a2555c5f23e97e7ff7c46eb6b69fd785b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8780ebc89a75918a1f4146b65185a295"><td class="memItemLeft" align="right" valign="top"><a id="a8780ebc89a75918a1f4146b65185a295" name="a8780ebc89a75918a1f4146b65185a295"></a>
LocalTimeSchedule&#160;</td><td class="memItemRight" valign="bottom"><b>sleepSchedule</b></td></tr>
<tr class="separator:a8780ebc89a75918a1f4146b65185a295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d9b5b4ab92962f00bc98e339278a370"><td class="memItemLeft" align="right" valign="top"><a id="a7d9b5b4ab92962f00bc98e339278a370" name="a7d9b5b4ab92962f00bc98e339278a370"></a>
LocalTimeSchedule&#160;</td><td class="memItemRight" valign="bottom"><b>publishSchedule</b></td></tr>
<tr class="separator:a7d9b5b4ab92962f00bc98e339278a370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cda0d070ecd63b3df79215cbd2bd300"><td class="memItemLeft" align="right" valign="top"><a id="a9cda0d070ecd63b3df79215cbd2bd300" name="a9cda0d070ecd63b3df79215cbd2bd300"></a>
std::function&lt; void(<a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>stateHandler</b> = &amp;SleepHelper::stateHandlerStart</td></tr>
<tr class="separator:a9cda0d070ecd63b3df79215cbd2bd300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad187ab04c4dfc6516c8ab23463487a83"><td class="memItemLeft" align="right" valign="top"><a id="ad187ab04c4dfc6516c8ab23463487a83" name="ad187ab04c4dfc6516c8ab23463487a83"></a>
system_tick_t&#160;</td><td class="memItemRight" valign="bottom"><b>connectAttemptStartMillis</b> = 0</td></tr>
<tr class="separator:ad187ab04c4dfc6516c8ab23463487a83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b8cffe89790c41d4e0f78f6e53ad15"><td class="memItemLeft" align="right" valign="top"><a id="a27b8cffe89790c41d4e0f78f6e53ad15" name="a27b8cffe89790c41d4e0f78f6e53ad15"></a>
system_tick_t&#160;</td><td class="memItemRight" valign="bottom"><b>connectedStartMillis</b> = 0</td></tr>
<tr class="separator:a27b8cffe89790c41d4e0f78f6e53ad15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae26d1ab394fe449c9cfb4c9755dbd226"><td class="memItemLeft" align="right" valign="top"><a id="ae26d1ab394fe449c9cfb4c9755dbd226" name="ae26d1ab394fe449c9cfb4c9755dbd226"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>outOfMemory</b> = false</td></tr>
<tr class="separator:ae26d1ab394fe449c9cfb4c9755dbd226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad74eb51eefc7205b133be4fa58e32718"><td class="memItemLeft" align="right" valign="top"><a id="ad74eb51eefc7205b133be4fa58e32718" name="ad74eb51eefc7205b133be4fa58e32718"></a>
Logger&#160;</td><td class="memItemRight" valign="bottom"><b>appLog</b></td></tr>
<tr class="separator:ad74eb51eefc7205b133be4fa58e32718"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a96e621d2b5d04ae764605bc5bf8ec185"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sleep_helper.html">SleepHelper</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper.html#a96e621d2b5d04ae764605bc5bf8ec185">_instance</a></td></tr>
<tr class="memdesc:a96e621d2b5d04ae764605bc5bf8ec185"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton instance of this class.  <a href="class_sleep_helper.html#a96e621d2b5d04ae764605bc5bf8ec185">More...</a><br /></td></tr>
<tr class="separator:a96e621d2b5d04ae764605bc5bf8ec185"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class is a singleton; you do not create one as a global, on the stack, or with new.</p>
<p >From global application setup you must call: <a class="el" href="class_sleep_helper.html#ad424c11c0781ea2ebbdd96a43521ea06" title="Gets the singleton instance of this class, allocating it if necessary.">SleepHelper::instance()</a>.<a class="el" href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d" title="Perform setup operations; call this from global application setup()">setup()</a>;</p>
<p >From global application loop you must call: <a class="el" href="class_sleep_helper.html#ad424c11c0781ea2ebbdd96a43521ea06" title="Gets the singleton instance of this class, allocating it if necessary.">SleepHelper::instance()</a>.<a class="el" href="class_sleep_helper.html#a8dac8eec4a7beb5a0ae8e6060e51764e" title="Perform application loop operations; call this from global application loop()">loop()</a>; </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a89399adf4c228cd258637ae45465418f" name="a89399adf4c228cd258637ae45465418f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89399adf4c228cd258637ae45465418f">&#9670;&nbsp;</a></span>SleepHelper() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SleepHelper::SleepHelper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The constructor is protected because the class is a singleton. </p>
<p >Use <a class="el" href="class_sleep_helper.html#ad424c11c0781ea2ebbdd96a43521ea06" title="Gets the singleton instance of this class, allocating it if necessary.">SleepHelper::instance()</a> to instantiate the singleton. </p>

</div>
</div>
<a id="af61ceb6581809f8166c32e1eb5bbda92" name="af61ceb6581809f8166c32e1eb5bbda92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af61ceb6581809f8166c32e1eb5bbda92">&#9670;&nbsp;</a></span>SleepHelper() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SleepHelper::SleepHelper </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >This class is a singleton and cannot be copied </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad424c11c0781ea2ebbdd96a43521ea06" name="ad424c11c0781ea2ebbdd96a43521ea06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad424c11c0781ea2ebbdd96a43521ea06">&#9670;&nbsp;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the singleton instance of this class, allocating it if necessary. </p>
<p >Use <a class="el" href="class_sleep_helper.html#ad424c11c0781ea2ebbdd96a43521ea06" title="Gets the singleton instance of this class, allocating it if necessary.">SleepHelper::instance()</a> to instantiate the singleton. </p>

</div>
</div>
<a id="a8dac8eec4a7beb5a0ae8e6060e51764e" name="a8dac8eec4a7beb5a0ae8e6060e51764e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dac8eec4a7beb5a0ae8e6060e51764e">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SleepHelper::loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform application loop operations; call this from global application <a class="el" href="class_sleep_helper.html#a8dac8eec4a7beb5a0ae8e6060e51764e" title="Perform application loop operations; call this from global application loop()">loop()</a> </p>
<p >You typically use <a class="el" href="class_sleep_helper.html#ad424c11c0781ea2ebbdd96a43521ea06" title="Gets the singleton instance of this class, allocating it if necessary.">SleepHelper::instance()</a>.<a class="el" href="class_sleep_helper.html#a8dac8eec4a7beb5a0ae8e6060e51764e" title="Perform application loop operations; call this from global application loop()">loop()</a>; </p>

</div>
</div>
<a id="a4c086ef306238bde738d7837c0e52bbb" name="a4c086ef306238bde738d7837c0e52bbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c086ef306238bde738d7837c0e52bbb">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >This class is a singleton and cannot be copied </p>

</div>
</div>
<a id="aa55dc9d8e2627cf697ac1bd6a1db9c2d" name="aa55dc9d8e2627cf697ac1bd6a1db9c2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa55dc9d8e2627cf697ac1bd6a1db9c2d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SleepHelper::setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform setup operations; call this from global application <a class="el" href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d" title="Perform setup operations; call this from global application setup()">setup()</a> </p>
<p >You typically use <a class="el" href="class_sleep_helper.html#ad424c11c0781ea2ebbdd96a43521ea06" title="Gets the singleton instance of this class, allocating it if necessary.">SleepHelper::instance()</a>.<a class="el" href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d" title="Perform setup operations; call this from global application setup()">setup()</a>; </p>

</div>
</div>
<a id="a147c91d776b0968268e148b1be6958d0" name="a147c91d776b0968268e148b1be6958d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a147c91d776b0968268e148b1be6958d0">&#9670;&nbsp;</a></span>withNoConnectionFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withNoConnectionFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool()&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register a callback for when in the no connection state. </p>
<p >If the should connect handlers indicate that a cloud connection should not be attempted, for example if we're in a situation we wake briefly to sample a sensor but want to aggregate values before connecting to the cloud to avoid connecting too frequently, then the no connect handler provides time for your application to do thing before going to sleep. If you return true from your callback, then the device will continue to stay awake.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp; </dd></dl>

</div>
</div>
<a id="a48f3f028336fae8f9b7b56335a2af98f" name="a48f3f028336fae8f9b7b56335a2af98f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48f3f028336fae8f9b7b56335a2af98f">&#9670;&nbsp;</a></span>withSleepOrResetFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withSleepOrResetFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(bool)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a function to be called right before sleep or reset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>A function or lambda to call. The bool result is ignored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>It's common to put code to power down peripherals and stop an external hardware watchdog. This should only be used for quick operations. You will already be disconnected from the cloud and network when this function is called. You cannot stop the reset or sleep process from this callback.</p>
<p >The order of callbacks is sleepOrReset, sleepConfiguration, then the device goes to sleep. When the device wakes, the wake callback is called. </p>

</div>
</div>
<a id="ac73ffa2b764f716d9af9c7840e7c30e5" name="ac73ffa2b764f716d9af9c7840e7c30e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac73ffa2b764f716d9af9c7840e7c30e5">&#9670;&nbsp;</a></span>withSleepReadyFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withSleepReadyFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(system_tick_t)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if it's OK to sleep now, when in connected state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>The sleep ready function prototype is:</p>
<p >bool callback(system_tick_t connecteTimeMs)</p>
<p >Return true if your situation is OK to sleep now. This does not guaranteed that sleep will actually occur, because there can be many sleep ready functions and other calculations.</p>
<p >Return false if you still have things to do before it's OK to sleep.</p>
<p >This callback is only called when connected. Scanning the list stops when the first callback return false, so you should not use this callback for periodic actions. Use withWhileConnectedFunction() instead. </p>

</div>
</div>
<a id="aa293cbbab40d07245d2006a71f696e6f" name="aa293cbbab40d07245d2006a71f696e6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa293cbbab40d07245d2006a71f696e6f">&#9670;&nbsp;</a></span>withTimeConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withTimeConfig </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tzConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the time configuration string for local time calculations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tzConfig</td><td>Timezone and daylight saving settings, POSIX timezone rule string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>If you do not call this, all time calculation will be done at UTC.</p>
<p >For the United States east coast, the configuration string is:</p>
<div class="fragment"><div class="line">EST5EDT,M3.2.0/2:00:00,M11.1.0/2:00:00<span class="stringliteral">&quot;</span></div>
</div><!-- fragment --><p >What this means is:</p>
<ul>
<li>"EST" is the standard time timezone name</li>
<li>5 is the offset from UTC in hours. Actually -5, as the sign is backwards from the way it's normally expressed. And it could be hours and minutes.</li>
<li>"EDT" is the daylight saving time timezone name</li>
<li>"M3.2.0" is when DST starts. Month 3 (March), 2nd week, 0 = Sunday</li>
<li>"2:00:00" transition to DST at 2:00 AM local time</li>
<li>"M11.1.0" transition back to standard time November, 1st week, on Sunday</li>
<li>"2:00:00" transition back to standard time at 2:00 AM local time</li>
</ul>
<p >Some examples:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Location   </th><th class="markdownTableHeadLeft">Timezone Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">New York   </td><td class="markdownTableBodyLeft">"EST5EDT,M3.2.0/02:00:00,M11.1.0/02:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Chicago   </td><td class="markdownTableBodyLeft">"CST6CDT,M3.2.0/2:00:00,M11.1.0/2:00:00"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Denver   </td><td class="markdownTableBodyLeft">"MST7MDT,M3.2.0/2:00:00,M11.1.0/2:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Phoenix   </td><td class="markdownTableBodyLeft">"MST7"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Los Angeles   </td><td class="markdownTableBodyLeft">"PST8PDT,M3.2.0/2:00:00,M11.1.0/2:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">London   </td><td class="markdownTableBodyLeft">"BST0GMT,M3.5.0/1:00:00,M10.5.0/2:00:00"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Sydney, Australia   </td><td class="markdownTableBodyLeft">"AEST-10AEDT,M10.1.0/02:00:00,M4.1.0/03:00:00"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Adelaide, Australia   </td><td class="markdownTableBodyLeft">"ACST-9:30ACDT,M10.1.0/02:00:00,M4.1.0/03:00:00"   </td></tr>
</table>

</div>
</div>
<a id="a0d2ea01e4c0d13adc81c038b33ea8871" name="a0d2ea01e4c0d13adc81c038b33ea8871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d2ea01e4c0d13adc81c038b33ea8871">&#9670;&nbsp;</a></span>withWakeEventFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withWakeEventFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(JSONWriter &amp;, int &amp;)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a callback to add to an event published on wake. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>This is used to efficiently publish data on each full wake with cloud connect. You can register a callback to add data to a JSON object. There is a priority ordering and the ability to split JSON data across multiple publishes if it does not fit, or discard unimportant data. This allows multiple parts of your code to efficiently combine data into a single publish without having to worry about size limits.</p>
<p >Wake event functions are only called when a full cloud connect is already planned, you can influence this using a shouldConnect callback.</p>
<p >The callback function has this prototype:</p>
<p >bool callback(JSONWriter &amp;writer, int &amp;priority)</p>
<p >The return value is ignored; you should return true.</p>
<p >writer is the JSONWriter to store the data into priority should be set to a value from 1 to 100. If you leave it at zero your data will not be saved!</p>
<p >Items are added to the event in priority order, largest first.</p>
<p >If you have a priority &lt; 50 and the event is full, then your data will be discarded to avoid generating another event. </p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="a96e621d2b5d04ae764605bc5bf8ec185" name="a96e621d2b5d04ae764605bc5bf8ec185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96e621d2b5d04ae764605bc5bf8ec185">&#9670;&nbsp;</a></span>_instance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> * SleepHelper::_instance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Singleton instance of this class. </p>
<p >The object pointer to this class is stored here. It's NULL at system boot. </p>

</div>
</div>
<a id="a47b6cf4b7036b8ab39b55e0aa6278f6b" name="a47b6cf4b7036b8ab39b55e0aa6278f6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47b6cf4b7036b8ab39b55e0aa6278f6b">&#9670;&nbsp;</a></span>persistentData</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper_1_1_persistent_data.html">PersistentData</a> SleepHelper::persistentData</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Class for managing persistent data. </p>
<p >Persistent data is stored as a file in the flash file system, </p>

</div>
</div>
<a id="a7a8fcf09815441b0de5478f492cf67aa" name="a7a8fcf09815441b0de5478f492cf67aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a8fcf09815441b0de5478f492cf67aa">&#9670;&nbsp;</a></span>settingsFile</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper_1_1_settings_file.html">SettingsFile</a> SleepHelper::settingsFile</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Class for managing the settings file. </p>
<p >The settings file is stored as a file in the flash file system and is a JSON object that is flat (one level deep, no sub-objects or arrays). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_sleep_helper_8h_source.html">SleepHelper.h</a></li>
<li>src/SleepHelper.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
