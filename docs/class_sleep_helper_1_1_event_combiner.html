<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SleepExample1: SleepHelper::EventCombiner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SleepExample1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="class_sleep_helper.html">SleepHelper</a></li><li class="navelem"><a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle"><div class="title">SleepHelper::EventCombiner Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class to handle building JSON events from multiple callbacks with priority and the ability to generate multiple events if necessary.  
 <a href="class_sleep_helper_1_1_event_combiner.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_sleep_helper_8h_source.html">SleepHelper.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_event_combiner_1_1_event_info.html">EventInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Container to hold a JSON fragment and a priority value 0 - 100.  <a href="class_sleep_helper_1_1_event_combiner_1_1_event_info.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a348617cf948cdb5fd95e128e389cd4b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_event_combiner.html#a348617cf948cdb5fd95e128e389cd4b0">EventCombiner</a> ()</td></tr>
<tr class="memdesc:a348617cf948cdb5fd95e128e389cd4b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="class_sleep_helper_1_1_event_combiner.html#a348617cf948cdb5fd95e128e389cd4b0">More...</a><br /></td></tr>
<tr class="separator:a348617cf948cdb5fd95e128e389cd4b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93ec638d113802614d4265f87a53d2eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_event_combiner.html#a93ec638d113802614d4265f87a53d2eb">withCallback</a> (std::function&lt; bool(JSONWriter &amp;, int &amp;)&gt; fn)</td></tr>
<tr class="memdesc:a93ec638d113802614d4265f87a53d2eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a callback function to generate JSON data.  <a href="class_sleep_helper_1_1_event_combiner.html#a93ec638d113802614d4265f87a53d2eb">More...</a><br /></td></tr>
<tr class="separator:a93ec638d113802614d4265f87a53d2eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5171be18cc6a6652c2bc0dd3ed49800c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_event_combiner.html#a5171be18cc6a6652c2bc0dd3ed49800c">generateEvents</a> (std::vector&lt; String &gt; &amp;events)</td></tr>
<tr class="memdesc:a5171be18cc6a6652c2bc0dd3ed49800c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate one or more events based on the maximum event size.  <a href="class_sleep_helper_1_1_event_combiner.html#a5171be18cc6a6652c2bc0dd3ed49800c">More...</a><br /></td></tr>
<tr class="separator:a5171be18cc6a6652c2bc0dd3ed49800c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a747c855dbe719d2e8588c2eff34eb8cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_event_combiner.html#a747c855dbe719d2e8588c2eff34eb8cb">generateEvents</a> (std::vector&lt; String &gt; &amp;events, size_t maxSize)</td></tr>
<tr class="memdesc:a747c855dbe719d2e8588c2eff34eb8cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">generate one or more events based on desired size  <a href="class_sleep_helper_1_1_event_combiner.html#a747c855dbe719d2e8588c2eff34eb8cb">More...</a><br /></td></tr>
<tr class="separator:a747c855dbe719d2e8588c2eff34eb8cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ab03dfe32d0a889b87b976dd2fa3db0d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_event_combiner.html#ab03dfe32d0a889b87b976dd2fa3db0d7">EventCombiner</a> (const <a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a> &amp;)=delete</td></tr>
<tr class="separator:ab03dfe32d0a889b87b976dd2fa3db0d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f14ab4f2a136283235bc7f8ff87e1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sleep_helper_1_1_event_combiner.html#a73f14ab4f2a136283235bc7f8ff87e1b">operator=</a> (const <a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a> &amp;)=delete</td></tr>
<tr class="separator:a73f14ab4f2a136283235bc7f8ff87e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a9d35318dd25d2ea56a19d2df37c4a5e1"><td class="memItemLeft" align="right" valign="top"><a id="a9d35318dd25d2ea56a19d2df37c4a5e1" name="a9d35318dd25d2ea56a19d2df37c4a5e1"></a>
<a class="el" href="class_sleep_helper_1_1_app_callback.html">AppCallback</a>&lt; JSONWriter &amp;, int &amp; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>callbacks</b></td></tr>
<tr class="memdesc:a9d35318dd25d2ea56a19d2df37c4a5e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback functions. <br /></td></tr>
<tr class="separator:a9d35318dd25d2ea56a19d2df37c4a5e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class to handle building JSON events from multiple callbacks with priority and the ability to generate multiple events if necessary. </p>
<p >The idea is that you want to combine all of the data into a single event if possible to minimize data operations. Sometimes you have unimportant data that would be nice to include if there's space but omit if not. And sometimes you have important data that must be sent, and it's OK to send multiple events if necessary. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a348617cf948cdb5fd95e128e389cd4b0" name="a348617cf948cdb5fd95e128e389cd4b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a348617cf948cdb5fd95e128e389cd4b0">&#9670;&nbsp;</a></span>EventCombiner() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SleepHelper::EventCombiner::EventCombiner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default constructor. </p>
<p >Use withCallback to add callback functions </p>

</div>
</div>
<a id="ab03dfe32d0a889b87b976dd2fa3db0d7" name="ab03dfe32d0a889b87b976dd2fa3db0d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab03dfe32d0a889b87b976dd2fa3db0d7">&#9670;&nbsp;</a></span>EventCombiner() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SleepHelper::EventCombiner::EventCombiner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >This class cannot be copied </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5171be18cc6a6652c2bc0dd3ed49800c" name="a5171be18cc6a6652c2bc0dd3ed49800c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5171be18cc6a6652c2bc0dd3ed49800c">&#9670;&nbsp;</a></span>generateEvents() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SleepHelper::EventCombiner::generateEvents </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; String &gt; &amp;&#160;</td>
          <td class="paramname"><em>events</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate one or more events based on the maximum event size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">events</td><td>vector of String objects to fill in with event data</td></tr>
  </table>
  </dd>
</dl>
<p>The events vector you pass into this method will be cleared. It will be returned filled in with zero or more Strings, each containing event data in valid JSON format. </p>

</div>
</div>
<a id="a747c855dbe719d2e8588c2eff34eb8cb" name="a747c855dbe719d2e8588c2eff34eb8cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a747c855dbe719d2e8588c2eff34eb8cb">&#9670;&nbsp;</a></span>generateEvents() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SleepHelper::EventCombiner::generateEvents </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; String &gt; &amp;&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>generate one or more events based on desired size </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">events</td><td>vector of String objects to fill in with event data </td></tr>
    <tr><td class="paramname">maxSize</td><td>Maximum size of each even in bytes</td></tr>
  </table>
  </dd>
</dl>
<p>The events vector you pass into this method will be cleared. It will be returned filled in with zero or more Strings, each containing event data in valid JSON format. </p>

</div>
</div>
<a id="a73f14ab4f2a136283235bc7f8ff87e1b" name="a73f14ab4f2a136283235bc7f8ff87e1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f14ab4f2a136283235bc7f8ff87e1b">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a> &amp; SleepHelper::EventCombiner::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >This class cannot be copied </p>

</div>
</div>
<a id="a93ec638d113802614d4265f87a53d2eb" name="a93ec638d113802614d4265f87a53d2eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93ec638d113802614d4265f87a53d2eb">&#9670;&nbsp;</a></span>withCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper_1_1_event_combiner.html">EventCombiner</a> &amp; SleepHelper::EventCombiner::withCallback </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(JSONWriter &amp;, int &amp;)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a callback function to generate JSON data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper_1_1_event_combiner.html" title="Class to handle building JSON events from multiple callbacks with priority and the ability to generat...">EventCombiner</a>&amp;</dd></dl>
<p>The callback function has this prototype:</p>
<p >bool callback(JSONWriter &amp;writer, int &amp;priority)</p>
<p >The return value is ignored; you should return true.</p>
<p >writer is the JSONWriter to store the data into priority should be set to a value from 1 to 100. If you leave it at zero your data will not be saved!</p>
<p >Items are added to the event in priority order, largest first.</p>
<p >If you have a priority &lt; 50 and the event is full, then your data will be discarded to avoid generating another event. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_sleep_helper_8h_source.html">SleepHelper.h</a></li>
<li>src/SleepHelper.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
