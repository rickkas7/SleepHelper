<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SleepHelper: Callback functions you can register</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SleepHelper
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Callback functions you can register</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa1f6f65d443e1d3e3765101e60e1ca04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#gaa1f6f65d443e1d3e3765101e60e1ca04">SleepHelper::withSleepConfigurationFunction</a> (std::function&lt; bool(SystemSleepConfiguration &amp;, <a class="el" href="class_sleep_helper_1_1_sleep_configuration_parameters.html">SleepConfigurationParameters</a> &amp;)&gt; fn)</td></tr>
<tr class="memdesc:gaa1f6f65d443e1d3e3765101e60e1ca04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a function to be called to configure sleep.  <a href="group__callbacks.html#gaa1f6f65d443e1d3e3765101e60e1ca04">More...</a><br /></td></tr>
<tr class="separator:gaa1f6f65d443e1d3e3765101e60e1ca04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac633b93687b39b6b9e5ce18caa205dff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#gac633b93687b39b6b9e5ce18caa205dff">SleepHelper::withWakeFunction</a> (std::function&lt; bool(const SystemSleepResult &amp;)&gt; fn)</td></tr>
<tr class="memdesc:gac633b93687b39b6b9e5ce18caa205dff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a function to be called on wake from sleep.  <a href="group__callbacks.html#gac633b93687b39b6b9e5ce18caa205dff">More...</a><br /></td></tr>
<tr class="separator:gac633b93687b39b6b9e5ce18caa205dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf9f04100075adfc2a5ccd27a14db7de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#gabf9f04100075adfc2a5ccd27a14db7de">SleepHelper::withSetupFunction</a> (std::function&lt; bool()&gt; fn)</td></tr>
<tr class="memdesc:gabf9f04100075adfc2a5ccd27a14db7de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a function to be called during <a class="el" href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d" title="Perform setup operations; call this from global application setup()">setup()</a>  <a href="group__callbacks.html#gabf9f04100075adfc2a5ccd27a14db7de">More...</a><br /></td></tr>
<tr class="separator:gabf9f04100075adfc2a5ccd27a14db7de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga015eb8ec460526d1dd81b4859823aa7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#ga015eb8ec460526d1dd81b4859823aa7e">SleepHelper::withLoopFunction</a> (std::function&lt; bool()&gt; fn)</td></tr>
<tr class="memdesc:ga015eb8ec460526d1dd81b4859823aa7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a function to be called on every call to <a class="el" href="class_sleep_helper.html#a8dac8eec4a7beb5a0ae8e6060e51764e" title="Perform application loop operations; call this from global application loop()">loop()</a>  <a href="group__callbacks.html#ga015eb8ec460526d1dd81b4859823aa7e">More...</a><br /></td></tr>
<tr class="separator:ga015eb8ec460526d1dd81b4859823aa7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9cdf24fe882a82663a70075aa6dd4a14"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#ga9cdf24fe882a82663a70075aa6dd4a14">SleepHelper::withDataCaptureFunction</a> (std::function&lt; bool(<a class="el" href="class_sleep_helper_1_1_app_callback_state.html">AppCallbackState</a> &amp;state)&gt; fn)</td></tr>
<tr class="memdesc:ga9cdf24fe882a82663a70075aa6dd4a14"><td class="mdescLeft">&#160;</td><td class="mdescRight">The data capture function is called on a schedule to capture data.  <a href="group__callbacks.html#ga9cdf24fe882a82663a70075aa6dd4a14">More...</a><br /></td></tr>
<tr class="separator:ga9cdf24fe882a82663a70075aa6dd4a14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8c0f11f4f26ffe05eab19f8935f8b54"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#gaa8c0f11f4f26ffe05eab19f8935f8b54">SleepHelper::withSleepReadyFunction</a> (std::function&lt; bool(<a class="el" href="class_sleep_helper_1_1_app_callback_state.html">AppCallbackState</a> &amp;, system_tick_t)&gt; fn)</td></tr>
<tr class="memdesc:gaa8c0f11f4f26ffe05eab19f8935f8b54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if it's OK to sleep now, when in connected state.  <a href="group__callbacks.html#gaa8c0f11f4f26ffe05eab19f8935f8b54">More...</a><br /></td></tr>
<tr class="separator:gaa8c0f11f4f26ffe05eab19f8935f8b54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabfb4418f8fb006b50d8efff7edbee4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#gaabfb4418f8fb006b50d8efff7edbee4d">SleepHelper::withShouldConnectFunction</a> (std::function&lt; bool(int &amp;connectConviction, int &amp;noConnectConviction)&gt; fn)</td></tr>
<tr class="memdesc:gaabfb4418f8fb006b50d8efff7edbee4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to call to determine if a full wake should be done.  <a href="group__callbacks.html#gaabfb4418f8fb006b50d8efff7edbee4d">More...</a><br /></td></tr>
<tr class="separator:gaabfb4418f8fb006b50d8efff7edbee4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9c61f27340b819a67a6cb4c2c1c1115"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#gaf9c61f27340b819a67a6cb4c2c1c1115">SleepHelper::withWakeOrBootFunction</a> (std::function&lt; bool(int)&gt; fn)</td></tr>
<tr class="memdesc:gaf9c61f27340b819a67a6cb4c2c1c1115"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called during setup, after sleep, or an aborted sleep because duration was too short.  <a href="group__callbacks.html#gaf9c61f27340b819a67a6cb4c2c1c1115">More...</a><br /></td></tr>
<tr class="separator:gaf9c61f27340b819a67a6cb4c2c1c1115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48f3f028336fae8f9b7b56335a2af98f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#ga48f3f028336fae8f9b7b56335a2af98f">SleepHelper::withSleepOrResetFunction</a> (std::function&lt; bool(bool)&gt; fn)</td></tr>
<tr class="memdesc:ga48f3f028336fae8f9b7b56335a2af98f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a function to be called right before sleep or reset.  <a href="group__callbacks.html#ga48f3f028336fae8f9b7b56335a2af98f">More...</a><br /></td></tr>
<tr class="separator:ga48f3f028336fae8f9b7b56335a2af98f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e5222c45e18155a9de17cb4350a8fbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#ga6e5222c45e18155a9de17cb4350a8fbc">SleepHelper::withMaximumTimeToConnectFunction</a> (std::function&lt; bool(system_tick_t ms)&gt; fn)</td></tr>
<tr class="memdesc:ga6e5222c45e18155a9de17cb4350a8fbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a function to be called while connecting.  <a href="group__callbacks.html#ga6e5222c45e18155a9de17cb4350a8fbc">More...</a><br /></td></tr>
<tr class="separator:ga6e5222c45e18155a9de17cb4350a8fbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5024de1d0301a413314ae08f1676399"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__callbacks.html#gae5024de1d0301a413314ae08f1676399">SleepHelper::withNoConnectionFunction</a> (std::function&lt; bool(<a class="el" href="class_sleep_helper_1_1_app_callback_state.html">AppCallbackState</a> &amp;state)&gt; fn)</td></tr>
<tr class="memdesc:gae5024de1d0301a413314ae08f1676399"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a callback for when in the no connection state.  <a href="group__callbacks.html#gae5024de1d0301a413314ae08f1676399">More...</a><br /></td></tr>
<tr class="separator:gae5024de1d0301a413314ae08f1676399"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9cdf24fe882a82663a70075aa6dd4a14" name="ga9cdf24fe882a82663a70075aa6dd4a14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9cdf24fe882a82663a70075aa6dd4a14">&#9670;&nbsp;</a></span>withDataCaptureFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withDataCaptureFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(<a class="el" href="class_sleep_helper_1_1_app_callback_state.html">AppCallbackState</a> &amp;state)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The data capture function is called on a schedule to capture data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Callback function or C++11 lambda to call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>The callback has this prototype</p>
<p >bool callback()</p>
<p >Return true if you need to be called back to finish capturing data</p>
<p >Return false if you are done capturing data.</p>
<p >This callback is called for quick wake, full wake, and while connected. It runs in a parallel state machine to the connection state machine. </p>

</div>
</div>
<a id="ga015eb8ec460526d1dd81b4859823aa7e" name="ga015eb8ec460526d1dd81b4859823aa7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga015eb8ec460526d1dd81b4859823aa7e">&#9670;&nbsp;</a></span>withLoopFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withLoopFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool()&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a function to be called on every call to <a class="el" href="class_sleep_helper.html#a8dac8eec4a7beb5a0ae8e6060e51764e" title="Perform application loop operations; call this from global application loop()">loop()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Callback function or C++11 lambda to call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>You will normally register a more specific function, such as a data capture function, no connect function, etc. but this function is provided just in case. </p>

</div>
</div>
<a id="ga6e5222c45e18155a9de17cb4350a8fbc" name="ga6e5222c45e18155a9de17cb4350a8fbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e5222c45e18155a9de17cb4350a8fbc">&#9670;&nbsp;</a></span>withMaximumTimeToConnectFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withMaximumTimeToConnectFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(system_tick_t ms)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a function to be called while connecting. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>Function or lambda prototype:</p>
<p >bool callback(system_tick_t ms)</p>
<p >Return true to continue attempting to connect. Return false to stop trying to connect and go to sleep.</p>
<p >All maximum time to connect functions are called on every loop call during the connecting phase, until one return false. This provides a way to be called periodically during connection. </p>

</div>
</div>
<a id="gae5024de1d0301a413314ae08f1676399" name="gae5024de1d0301a413314ae08f1676399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5024de1d0301a413314ae08f1676399">&#9670;&nbsp;</a></span>withNoConnectionFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withNoConnectionFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(<a class="el" href="class_sleep_helper_1_1_app_callback_state.html">AppCallbackState</a> &amp;state)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register a callback for when in the no connection state. </p>
<p >If the should connect handlers indicate that a cloud connection should not be attempted, for example if we're in a situation we wake briefly to sample a sensor but want to aggregate values before connecting to the cloud to avoid connecting too frequently, then the no connect handler provides time for your application to do thing before going to sleep. If you return true from your callback, then the device will continue to stay awake.</p>
<p >If you want to be called while connected, see the sleepReady function which does double duty as the whileConnected function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp; </dd></dl>

</div>
</div>
<a id="gabf9f04100075adfc2a5ccd27a14db7de" name="gabf9f04100075adfc2a5ccd27a14db7de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf9f04100075adfc2a5ccd27a14db7de">&#9670;&nbsp;</a></span>withSetupFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withSetupFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool()&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a function to be called during <a class="el" href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d" title="Perform setup operations; call this from global application setup()">setup()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Callback function or C++11 lambda to call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>You must register this callback before actually calling <a class="el" href="class_sleep_helper.html#aa55dc9d8e2627cf697ac1bd6a1db9c2d" title="Perform setup operations; call this from global application setup()">setup()</a> for obvious reasons. You will probably never need to use this, but it exists just in case. </p>

</div>
</div>
<a id="gaabfb4418f8fb006b50d8efff7edbee4d" name="gaabfb4418f8fb006b50d8efff7edbee4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaabfb4418f8fb006b50d8efff7edbee4d">&#9670;&nbsp;</a></span>withShouldConnectFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withShouldConnectFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(int &amp;connectConviction, int &amp;noConnectConviction)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to call to determine if a full wake should be done. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Callback function or C++11 lambda to call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>The callback has the prototype:</p>
<p >bool callback(int &amp;connectConviction, int &amp;noConnectConviction)</p>
<p >If the callback believes a connection should be made, the connectConviction should be set to a value from 1 to 100. A typical value would be 60. This would encourage connection but still could be overridden for other reasons, such as insufficient battery power.</p>
<p >If the callback believes a connection should not be made, it sets noConnectConviction to a value from 1 to 100, 100 being definitely do not connect.</p>
<p >If the highest connection conviction is greater than the highest no connection conviction, then a connection will be attempted.</p>
<p >Your function should return true in all cases. </p>

</div>
</div>
<a id="gaa1f6f65d443e1d3e3765101e60e1ca04" name="gaa1f6f65d443e1d3e3765101e60e1ca04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa1f6f65d443e1d3e3765101e60e1ca04">&#9670;&nbsp;</a></span>withSleepConfigurationFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withSleepConfigurationFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(SystemSleepConfiguration &amp;, <a class="el" href="class_sleep_helper_1_1_sleep_configuration_parameters.html">SleepConfigurationParameters</a> &amp;)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register a function to be called to configure sleep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Callback function or C++11 lambda to call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>The callback function has the prototype:</p>
<p >bool callback(SystemSleepConfiguration &amp;sleepConfiguration, SleepConfigurationParameters &amp;sleepParameters)</p>
<ul>
<li>sleepConfiguration is the object that is passed to <code>System.sleep()</code> you can refer to this or modify it, however some parameters like duration should be set via the sleepParameters.</li>
<li>sleepParameters include both informational fields (like whether you're currently connected to cellular) as well as fields you can change to modify the sleep behavior. </li>
</ul>

</div>
</div>
<a id="ga48f3f028336fae8f9b7b56335a2af98f" name="ga48f3f028336fae8f9b7b56335a2af98f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga48f3f028336fae8f9b7b56335a2af98f">&#9670;&nbsp;</a></span>withSleepOrResetFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withSleepOrResetFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(bool)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a function to be called right before sleep or reset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>A function or lambda to call. The bool result is ignored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>It's common to put code to power down peripherals and stop an external hardware watchdog. This should only be used for quick operations. You will already be disconnected from the cloud and network when this function is called. You cannot stop the reset or sleep process from this callback.</p>
<p >The order of callbacks is sleepOrReset, sleepConfiguration, then the device goes to sleep. When the device wakes, the wake callback is called. </p>

</div>
</div>
<a id="gaa8c0f11f4f26ffe05eab19f8935f8b54" name="gaa8c0f11f4f26ffe05eab19f8935f8b54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa8c0f11f4f26ffe05eab19f8935f8b54">&#9670;&nbsp;</a></span>withSleepReadyFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withSleepReadyFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(<a class="el" href="class_sleep_helper_1_1_app_callback_state.html">AppCallbackState</a> &amp;, system_tick_t)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if it's OK to sleep now, when in connected state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Callback function or C++11 lambda to call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>The sleep ready function prototype is:</p>
<p >bool callback(AppCallbackState &amp;state, system_tick_t connecteTimeMs)</p>
<p >Return false if your situation is OK to sleep now. This does not guaranteed that sleep will actually occur, because there can be many sleep ready functions and other calculations. Once you return false your callback will no longe be called until the next wake cycle.</p>
<p >Return true if you still have things to do before it's OK to sleep. You callback will continue to be called until it returns false. </p>

</div>
</div>
<a id="gac633b93687b39b6b9e5ce18caa205dff" name="gac633b93687b39b6b9e5ce18caa205dff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac633b93687b39b6b9e5ce18caa205dff">&#9670;&nbsp;</a></span>withWakeFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withWakeFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(const SystemSleepResult &amp;)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register a function to be called on wake from sleep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Callback function or C++11 lambda to call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<p>The wake function has the prototype:</p>
<p >bool callback(const SystemSleepResult &amp;sleepResult);</p>
<ul>
<li>sleepResult is a const reference to the SystemSleepResult that was obtained right after wake.</li>
</ul>
<p >You should return true in all cases from your callback. </p>

</div>
</div>
<a id="gaf9c61f27340b819a67a6cb4c2c1c1115" name="gaf9c61f27340b819a67a6cb4c2c1c1115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf9c61f27340b819a67a6cb4c2c1c1115">&#9670;&nbsp;</a></span>withWakeOrBootFunction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sleep_helper.html">SleepHelper</a> &amp; SleepHelper::withWakeOrBootFunction </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(int)&gt;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called during setup, after sleep, or an aborted sleep because duration was too short. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="class_sleep_helper.html">SleepHelper</a>&amp;</dd></dl>
<ul>
<li>WAKEUP_REASON_SETUP Called from setup after cold boot or reset</li>
<li>WAKEUP_REASON_NO_SLEEP Called after sleep aborted as it was too short</li>
<li>Any result code from for SystemSleepWakeupReason, such as:<ul>
<li>SystemSleepWakeupReason::BY_GPIO</li>
<li>SystemSleepWakeupReason::BY_ADC</li>
<li>SystemSleepWakeupReason::BY_RTC</li>
<li>SystemSleepWakeupReason::BY_BLE</li>
<li>SystemSleepWakeupReason::BY_NETWORK </li>
</ul>
</li>
</ul>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
